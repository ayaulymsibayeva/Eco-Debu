<html xmlns:th = "http://www.thymeleaf.org"
      xmlns:layout = "http://ultraq.net.nz/thymeleaf/layout" layout:decorator = "layout/adminpage.html"
      xmlns:sec = "http://www.thymeleaf.org/extras/spring-security">


<div layout:fragment="site_cont">

                <div class="container-fluid mt-3">
                    <h3 th:text="${user.fullName}"></h3>
                    <form th:action="@{'/editUser'}" method="post">
                            <input type="hidden"  name="user_id" th:value="${user.id}">
                            <div class="form-group">
                                <label th:text="#{email}"></label>
                                <input type="text" class="form-control" name="email" th:value="${user.email}">
                            </div>

                            <div class="form-group">
                                <label th:text="#{password}"></label>
                                <input type="password" class="form-control" name="password" th:value="${user.password}">
                            </div>
                            <div class="form-group">
                                <label th:text="#{fullname}"></label>
                                <input type="text" class="form-control" name="fullname" th:value="${user.fullName}">
                            </div>

                            <a th:href="@{'/deleteUser?id='+${user.id}}" class="btn btn-danger" ><img style="height: 15px;width: 15px" th:src="@{'/icons/trash.png'}">   <span th:text="#{button.delete}"></span></a>
                            <button  class="btn btn-success" ><img style="height: 15px;width: 15px" th:src="@{'/icons/diskette.png'}">   <span th:text="#{button.editItem}"></span></button>

                    </form>

                            <h3 th:text="#{roles}"></h3>
                            <table class="table table-striped">
                                <tbody>


                                <tr th:each="r : ${roles}">
                                    <form th:action="@{'/assignrole'}" method="post">
                                        <input type="hidden" th:value="${user.id}" name="user_id">
                                        <input type="hidden" th:value="${r.id}" name="role_id">
                                        <td th:text="${r.role}"></td>
                                        <td width="10%">
                                            <button th:hidden="${user.roles.contains(r)}" class="btn btn-success btn-sm"><img style="height: 15px;width: 15px" th:src="@{'/icons/add.png'}" class="card-img-top" alt="..."></button>
                                            <a th:href="@{'/assigndeleterole?user_id='+${user.id}+'&role_id='+${r.id}}" th:hidden="${!user.roles.contains(r)}"  class="btn btn-danger btn-sm"><img style="height: 15px;width: 15px" th:src="@{'/icons/minus.png'}" class="card-img-top" alt="..."></a>
                                        </td>
                                    </form>
                                </tr>

                                </tbody>
                            </table>



        </div>

</div>
</html>